var user_info=$("#user_info").val();function reviewLikeRating(e,i){productReviewSetLike(e,i,function(e){e&&location.reload()})}function buyIn1Click(e){validSelectModelProduct()&&(app.product_id=e,app.componentDialog="buy-in-1-click")}function productSliderZoom(e){app.componentDialog="product_slider_zoom",app.product_id=e}function _addToCart(e){validSelectModelProduct()&&addToCart(e)&&Swal.fire({title:"Товар в корзине",type:"success",showCancelButton:!0,confirmButtonColor:"#4aa90b",cancelButtonColor:"#0089d0",confirmButtonText:"Оформление заказа",cancelButtonText:"Продолжить покупки"}).then(e=>{e.value&&(location.href="/checkout")})}user_info&&(user_info=JSON.parse(user_info)),$(document).ready(function(){$("#show-full").on("click",function(e){$(".company-text").addClass("full"),$(this).remove()}),$(".icon_menu").click(function(e){$(".wrapper").addClass("g-ttl-move"),$(".kaspi-menu").addClass("_opened")}),$(".wrapper").click(function(e){$(e.target).hasClass("g-ttl-move")&&($(".wrapper").removeClass("g-ttl-move"),$(".kaspi-menu").removeClass("_opened"))}),$("#go-back").click(function(e){parent.history.back()}),$(".filters__view-button").click(function(e){$(this).hasClass("_active")||($(".filters__view-button").removeClass("_active"),$(this).addClass("_active"),$(this).hasClass("_grid")?($(".catalog-grid").addClass("_grid"),$(".catalog-grid").removeClass("_list"),localStorage.setItem("catalog-grid","_grid")):$(this).hasClass("_list")&&($(".catalog-grid").addClass("_list"),$(".catalog-grid").removeClass("_grid"),localStorage.setItem("catalog-grid","_list")))}),localStorage.getItem("catalog-grid")&&$(".filters__view-button."+localStorage.getItem("catalog-grid")).trigger("click");new Swiper("#main-slider",{lazy:!0,direction:"horizontal",loop:!0,autoplay:6e3,iOSEdgeSwipeDetection:!0,spaceBetween:10,centeredSlides:!0,slidesPerView:"auto",autoplay:{delay:3e3}});$(".product-slider").length>0&&$(".product-slider").slick({slidesToShow:2.1,slidesToScroll:2.1});new Swiper("#product-slider",{lazy:!0,direction:"horizontal",loop:!1,pagination:{el:".swiper-pagination"},paginationClickable:!0,iOSEdgeSwipeDetection:!0});$(".mount-search-bar").click(function(e){app.componentDialog="search-dialog"}),$("#write-review").click(function(e){app.product_id=$(this).data("product_id"),app.componentDialog="write-review"}),$("#back-call").click(function(e){app.componentDialog="back-call"}),$("._scroll, .catalog-items").scroll(function(e){for(var i=$(this).find("img.lazy"),n=0;n<i.length;n++)$(i[n]).attr("src",$(i[n]).data("original"))})}),Vue.config.productionTip=!1,Vue.component("product_slider_zoom",{data:function(){return{images:[],photo:"",youtube:"",swiper:null}},template:'\n           <div class="dialog">\n               <div class="topbar container g-bn">\n                    <a class="topbar__icon icon icon_close" @click="close"></a>\n               </div>\n               <div class="dialog__content">\n                  <div class="lightbox">\n                     <div class="lightbox__images container">\n                        <div class="swiper-container" id="ffffffff">\n                           <div class="swiper-wrapper">\n                              \n                              <div class="swiper-slide">\n                                <div class="lightbox__image-wrapper">\n                                    <img :src="photo" class="lightbox__image">\n                                </div>\n                              </div>\n                              \n                              \n                              <div class="swiper-slide" v-for="image in images">\n                                <div class="lightbox__image-wrapper">\n                                    <img :src="image" class="lightbox__image">\n                                </div>\n                              </div>\n                              \n                              <div class="swiper-slide" v-if="youtube">\n                                 <div class="lightbox__image-wrapper">\n                                    <iframe \n                                        :id="youtube" \n                                        frameborder="0" \n                                        allowfullscreen="1" \n                                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" \n                                        title="YouTube video player" \n                                        width="640" \n                                        height="360" \n                                        :src="\'https://www.youtube.com/embed/\' + youtube + \'?rel=0&amp;enablejsapi=1&amp;origin=https%3A%2F%2Fkaspi.kz&amp;widgetid=1\'">\n                                    </iframe>\n                                 </div>\n                              </div>\n                           </div>\n                           \n                        </div>\n                     </div>\n                     \n                     <div class="lightbox__thumbs">\n                        <div class="lightbox__thumb-focus" style="left: 18px;" v-if="false"></div>\n\n                        <div class="lightbox__thumb-wrapper" @click="swiperCall(0)">\n                            <img :src="photo" class="lightbox__thumb">\n                        </div>\n\n                        <div class="lightbox__thumb-wrapper" v-for="(image, index) in images" @click="swiperCall(index + 1)">\n                            <img :src="image" class="lightbox__thumb">\n                        </div>\n                        \n                        <div class="lightbox__thumb-wrapper _video play-icon" v-if="youtube" @click="swiperCall(images.length + 1)">\n                            <img :src="\'https://i.ytimg.com/vi/\' + youtube + \'/default.jpg\'" class="lightbox__thumb">\n                        </div>\n                     </div>\n                     \n                  </div>\n               </div>\n            </div>   \n    ',methods:{close(){app.componentDialog=""},swiperCall(e){console.log(e),this.swiper.slideTo(e,1e3,!1)}},created(){let e=new FormData;e.append("_token",getCsrfToken());var i=app.product_id,n=this;axios.post("/product-images/"+i,e).then(function(e){n.photo=e.data.photo,n.images=e.data.images,n.youtube=e.data.youtube,setTimeout(function(){n.swiper=new Swiper("#ffffffff",{direction:"horizontal",loop:!1,iOSEdgeSwipeDetection:!0})},100)}).catch(function(e){swalErrors(e.response.data.errors,"Ошибка 422")})}}),Vue.component("back-call",{data:function(){return{phone:user_info.phone,url:location.href,focus:{phone:1},wait:!1}},template:'\n        <div class="dialog">\n            <form v-on:submit="backCall" method="post" enctype="multipart/form-data">\n                <div class="dialog__content _topbar-off">\n                        <div class="topbar container _filter-dialog">\n                           <h1 class="topbar__heading">Заказать звонок</h1>\n                           <div class="button _only-red-text" @click="close">Отмена</div>\n                        </div>\n                        \n                        <h2 class="container-title">\n                            Если у вас есть вопрос, укажите, что вас интересует и оставьте номер телефона. Мы перезвоним в удобное для вас время и ответим на ваш вопрос.\n                        </h2>\n                        \n                        <div>\n                            <div class="input" :class="{ \'_has-value\': phone, \'_focused\': focus.phone == 1, \'_invalid\': focus.phone == 2 && !phone }">\n                                <label class="input__label">Введите номер телефона</label>\n                                <the-mask \n                                       @focus="focus.phone = 1" \n                                       @blur="focus.phone = 2"\n                                       placeholder="+7(777)777-77-77 *"\n                                       mask="+7(###)###-##-##"\n                                       class="input__input" \n                                       v-model="phone"/>\n                            </div>\n                            <div class="input__has-error" v-if="focus.phone == 2">Пожалуйста, заполните это поле</div>\n                        </div>                      \n                </div>\n                               \n                <button type="submit" class="button _big _space">\n                     <span class="ajax-loader">\n                        <img v-show="wait" src="/site/images/ajax-loader.gif"/>\n                        Заказать звонок\n                     </span>\n                </button>\n                                \n            </form>          \n        </div>        \n    ',methods:{close(){app.componentDialog=""},backCall(e){e.preventDefault();var i=this;if(!this.wait){this.wait=!0;let e=new FormData;e.append("_token",getCsrfToken()),e.append("phone",this.phone),e.append("url",this.url),axios.post("/callback",e).then(function(e){e.data?(i.close(),Swal({title:"Заказать звонок",html:"Заявка отправлена! В ближайшее время с Вами свяжется наш менеджер."})):alert("Ошибка БД"),i.wait=!1}).catch(function(e){swalErrors(e.response.data.errors,"Ошибка 422"),i.wait=!1})}}},created(){}}),Vue.component("buy-in-1-click",{data:function(){return{name:user_info.name,email:user_info.email,phone:user_info.phone,focus:{name:0,email:0,phone:1},wait:!1}},template:'\n        <div class="dialog">\n            <form v-on:submit="buyIn1Click" method="post" enctype="multipart/form-data">\n                <div class="dialog__content _topbar-off" style="height: 400px;">\n                        <div class="topbar container _filter-dialog">\n                           <h1 class="topbar__heading">Быстрый заказ</h1>\n                           <div class="button _only-red-text" @click="close">Отмена</div>\n                        </div>\n                        <div>\n                            <div class="input" :class="{ \'_has-value\': name, \'_focused\': focus.name == 1, \'_invalid\': focus.name == 2 && !name }">\n                                <label class="input__label">Имя</label>\n                                <input \n                                    type="text" \n                                    class="input__input" \n                                    v-model="name" \n                                    @focus="focus.name = 1"\n                                    @blur="focus.name = 2"/>\n                            </div>\n                            <div class="input__has-error" v-if="focus.name == 2">Пожалуйста, заполните это поле</div>\n                        </div>\n                        <div>\n                            <div class="input" :class="{ \'_has-value\': email, \'_focused\': focus.email == 1, \'_invalid\': focus.email == 2 && !email }">\n                                <label class="input__label">Ваш e-mail</label>\n                                <input \n                                    type="email" \n                                    class="input__input" \n                                    v-model="email" \n                                    @focus="focus.email = 1"\n                                    @blur="focus.email = 2"/>\n                            </div>\n                            <div class="input__has-error" v-if="focus.email == 2">Пожалуйста, заполните это поле</div>\n                        </div>\n                        <div>\n                            <div class="input" :class="{ \'_has-value\': phone, \'_focused\': focus.phone == 1, \'_invalid\': focus.phone == 2 && !phone }">\n                                <label class="input__label">Введите номер телефона</label>\n                                <the-mask \n                                       @focus="focus.phone = 1" \n                                       @blur="focus.phone = 2"\n                                       placeholder="+7(777)777-77-77 *"\n                                       mask="+7(###)###-##-##"\n                                       class="input__input" \n                                       v-model="phone"/>\n                            </div>\n                            <div class="input__has-error" v-if="focus.phone == 2">Пожалуйста, заполните это поле</div>\n                        </div>                      \n                </div>\n                \n                <button type="submit" class="button _big _space">\n                     <span class="ajax-loader">\n                        <img v-show="wait" src="/site/images/ajax-loader.gif"/>\n                        Заказать\n                     </span>\n                </button>\n                \n                \n                \n            </form>          \n        </div>        \n    ',methods:{close(){app.componentDialog=""},buyIn1Click(e){e.preventDefault();var i=this;if(!this.wait){this.wait=!0;let e=new FormData;e.append("_token",getCsrfToken()),e.append("name",this.name),e.append("email",this.email),e.append("phone",this.phone),e.append("product_id",app.product_id),axios.post("/one-click-order",e).then(function(e){e.data?(this.order_id=e.data.order_id,this.order_id&&(i.close(),Swal({type:"success",html:'Номер заказа <a style="font-size: 20px;" href="/order-history/'+this.order_id+'">№:'+this.order_id+"</a>",title:"Ваш заказ успешно оформлен"}))):alert("Ошибка БД"),i.wait=!1}).catch(function(e){console.log(e),swalErrors(e.response.data.errors,"Ошибка 422"),i.wait=!1})}}},created(){}}),Vue.component("write-review",{data:function(){return{rating:5,plus:"",minus:"",name:"",email:"",comment:"",focus:{rating:0,plus:0,minus:0,name:0,email:0,comment:0}}},template:'\n        <div class="dialog">\n            <div class="dialog__content _topbar-off">\n                <form v-on:submit="writeReview" method="post" enctype="multipart/form-data">\n                \n                    <div class="topbar container _filter-dialog">\n                       <h1 class="topbar__heading">Написать отзыв</h1>\n                       <div class="button _only-red-text" @click="close">Отмена</div>\n                    </div>\n                                    \n                    <div>\n                        <div class="input" :class="{ \'_has-value\': rating, \'_focused\': focus.rating == 1, \'_invalid\': focus.rating == 2 && !rating }">\n                            <label class="input__label">Оценка *</label>\n                            <select class="input__input" v-model="rating" name="rating">\n                                <option value="1">1</option>\n                                <option value="2">2</option>\n                                <option value="3">3</option>\n                                <option value="4">4</option>\n                                <option value="5">5</option>\n                            </select>\n                        </div>\n                        <div class="input__has-error">Пожалуйста, заполните это поле</div>\n                    </div>\n                    \n                    \n                    <div>\n                        <div class="input" :class="{ \'_has-value\': plus, \'_focused\': focus.plus == 1, \'_invalid\': focus.plus == 2 && !plus }">\n                            <label class="input__label">Достоинства</label>\n                            <textarea name="plus" class="input__input" v-model="plus" @focus="focus.plus = 1" @blur="focus.plus = 2"></textarea>\n                        </div>\n                        <div class="input__has-error" v-if="focus.plus == 2">Пожалуйста, заполните это поле</div>\n                    </div>\n                    \n                    \n                    <div>\n                        <div class="input" :class="{ \'_has-value\': minus, \'_focused\': focus.minus == 1, \'_invalid\': focus.minus == 2 && !minus }">\n                            <label class="input__label">Недостатки</label>\n                            <textarea name="minus" class="input__input" v-model="minus" @focus="focus.minus = 1" @blur="focus.minus = 2"></textarea>\n                        </div>\n                        <div class="input__has-error" v-if="focus.minus == 2">Пожалуйста, заполните это поле</div>\n                    </div>\n                    \n                    \n                    <div>\n                        <div class="input" :class="{ \'_has-value\': name, \'_focused\': focus.name == 1, \'_invalid\': focus.name == 2 && !name }">\n                            <label class="input__label">Ваше имя *</label>\n                            <textarea name="name" class="input__input" v-model="name" @focus="focus.name = 1" @blur="focus.name = 2"></textarea>\n                        </div>\n                        <div class="input__has-error" v-if="focus.name == 2">Пожалуйста, заполните это поле</div>\n                    </div>\n                    \n                    \n                    <div>\n                        <div class="input" :class="{ \'_has-value\': email, \'_focused\': focus.email == 1, \'_invalid\': focus.email == 2 && !email }">\n                            <label class="input__label">Ваш e-mail</label>\n                            <input name="email" type="email" class="input__input" v-model="email" @focus="focus.email = 1" @blur="focus.email = 2"/>\n                        </div>\n                        <div class="input__has-error" v-if="focus.email == 2">Пожалуйста, заполните это поле</div>\n                    </div>\n                    \n                    \n                    <div>\n                        <div class="input" :class="{ \'_has-value\': comment, \'_focused\': focus.comment == 1, \'_invalid\': focus.comment == 2 && !comment }">\n                            <label class="input__label">Комментарий *</label>\n                            <textarea name="comment" class="input__input" v-model="comment" @focus="focus.comment = 1" @blur="focus.comment = 2"></textarea>\n                        </div>\n                        <div class="input__has-error" v-if="focus.comment == 2">Пожалуйста, заполните это поле</div>\n                    </div>\n                  \n                   <button type="submit" class="button _big-fixed button-sellers">\n                        Написать отзыв\n                   </button>\n              </form>\n              \n            </div>\n        </div>        \n    ',methods:{close(){app.componentDialog=""},writeReview(e){e.preventDefault();var i=this;let n=new FormData(e.target);n.append("_token",getCsrfToken()),n.append("product_id",app.product_id),axios.post("/write-review",n).then(function(e){e&&(Swal({title:"Написать отзыв",html:"Ваш отзыв успешно оставлен"}),i.close(),setInterval(function(){location.reload()}.bind(this),1e3))}).catch(function(e){swalErrors(e.response.data.errors,"Ошибка 422")})}}}),Vue.component("search-dialog",{data:function(){return{search:"",result:[]}},template:'<div class="dialog">\n                <div class="dialog__content _topbar-off ">\n\n                    <div class="search">\n                        <div class="search__wrapper">\n                            <form action="" class="search__input-wrapper">\n                                <input v-model="search" type="search" class="search__input active" autofocus="" placeholder="Поиск товара">\n                            </form>\n                            <a @click="close" class="search__button button _only-red-text">Отмена</a>\n                        </div>\n                        <div class="search__suggestion-list">\n                        \n                            <a v-for="item in result" :href="item.url" class="catalog-item container _product-img">\n                                <img :src="item.photo" width="35">&nbsp;\n                                <span class="catalog-item__title">\n                                    {{ item.name }}\n                                    <br/>\n                                    <b>{{ item.price }}</b>\n                                </span>\n                                <i class="catalog-item__icon icon icon_chevron"></i>\n                            </a>\n                        \n                        </div>\n                    </div>\n\n                </div>\n            </div>',methods:{close(){app.componentDialog=""},querySearch(){var e=this;console.log(e.search),axios.get("/product-search",{params:{searchText:e.search,maxResults:10}}).then(function(i){console.log(i.data),e.result=i.data})}},watch:{search:{handler:function(e,i){e?this.querySearch():this.result=[]},deep:!0}}}),Vue.component("filters",{data:function(){return{filters:JSON.parse($("#filters").val()),productsAttributesFilters:JSON.parse($("#productsAttributesFilters").val()),subMenu:0,start_page:!0}},template:'<div class="dialog a-fadeInRight">\n                    <form id="filterpro">\n                       <div class="dialog__content _topbar-off ">\n                          <div class="filter-dialog">\n                             <div class="filter-dialog__wrapper g-mb-gtn">\n                                <div class="topbar container _filter-dialog">\n                                   <div class="button _only-red-text" @click="close">{{ subMenu ? \'Назад\' : \'Отмена\'}}</div>\n                                   <h1 class="topbar__heading">Фильтр</h1>\n                                   <div class="button _only-red-text" @click="filtersClear">Сбросить</div>\n                                </div>\n                                <ul class="filter-dialog__ul">\n\n                                    <li class="filter-dialog__el" v-for="attribute in productsAttributesFilters">\n                                          <div class="filter-dialog__item container g-bb-thin" @click="subMenu = attribute.id" :class="{\'g-hide\': subMenu}">\n                                             <a class="filter-dialog__description">\n                                                <div class="filter-dialog__title">\n                                                    {{ attribute.name }}\n                                                </div>\n                                                <div class="filter-dialog__check" v-html="selectedText(attribute)"></div>\n                                             </a>\n                                             <div class="filter-dialog__checkbox">\n                                                <label>\n                                                   <input type="checkbox" :checked="selectedText(attribute) ? true : false">\n                                                   <div class="filter-dialog__checkbox-mask"><i class="icon icon_check"></i></div>\n                                                </label>\n                                             </div>\n                                          </div>\n                                          <ul class="filter-dialog__submenu" :class="{\'_show\': subMenu == attribute.id, \'g-hide\': subMenu != attribute.id}">\n\n                                                 <li class="filter-dialog__item container" v-for="(value, index) in attribute.values">\n                                                    <label :for="\'filter\' + value.id" class="label-block">\n                                                        <a class="filter-dialog__description">\n                                                           <div class="filter-dialog__title">\n                                                                 {{ value.value }}\n                                                                <span class="filter-dialog__couter" v-if="false"> (94) </span>\n                                                           </div>\n                                                        </a>\n                                                        <div class="filter-dialog__checkbox">\n                                                           <label :for="\'filter\' + value.id">\n                                                           \n                                                              <input type="checkbox"\n                                                                     :id="\'filter\' + value.id"\n                                                                     :value="value.code"\n                                                                     :name="attribute.code" \n                                                                     :checked="checked(attribute.code, value)"/>\n                                                              \n                                                              <div class="filter-dialog__checkbox-mask"> <i class="icon icon_check"></i> </div>\n                                                           </label>\n                                                        </div>\n                                                    </label>    \n                                                 </li>\n\n                                          </ul>\n                                    </li>\n\n                                </ul>\n                             </div>\n                             \n                             <div class="filter-dialog__button-space">\n                                <a class="button _big" @click="urlParamsGenerate">Применить</a>\n                             </div>\n                             \n                          </div>\n                       </div>\n                    </form>\n              </div>',methods:{close(){this.subMenu?this.subMenu=0:app.showFilters=!1},filtersClear(){filtersClear()},selectedText(e){var i="",n=gerArrayFilters();if(!n.length&&this.start_page&&(n=this.filters),this.start_page=!1,n[e.code]&&(n=n[e.code],Object.keys(n).forEach(function(a){Object.keys(e.values).forEach(function(t){e.values[t].code==n[a]&&(i+=e.values[t].value+", ")})})),i)return i.slice(0,-2)},checked(e,i){var n=!!this.filters[e]&&this.filters[e],a=!1;return n&&($.isArray(n)||"object"==typeof n?Object.keys(n).forEach(function(e){n[e]!=i.code||(a=!0)}):n==i.code&&(a=!0)),a},urlParamsGenerate(){urlParamsGenerate()}},created(){},computed:{filtersfilters(){console.log(this.filters)}}}),Vue.component("checkout",{template:'<div class="pickup__wrapper">\n\n                    <span v-if="list_cart.length == 0">\n                        <p class="container-title" v-if="order_id > 0">\n                            Ваш заказ успешно оформлен, номер заказа <a style="font-size: 14px;" v-bind:href="\'/order-history/\' + order_id">№:{{ order_id }}</a>\n                        </p>\n                        <p v-else class="container-title">Ваша корзина пуста!</p> \n                    </span>\n            \n                    <div v-else>\n\n                        <div class="container pickup-step g-bb-fat">\n                            <div class="pickup-step__header">\n                                <div class="pickup-step__number _active">1</div>\n                                <h3 class="pickup-step__title">Способ доставки</h3>\n                            </div>\n                            <ul class="nav-pills g-bg-c0 g-bb0">\n                                <li @click="selectedCarrier(item)"\n                                    class="nav-pills__button g-ttu"\n                                    v-bind:class="{\'_active\': item.id == carrier.id}"\n                                    v-for="(item, index) in list_carriers">\n                                        {{ item.name }}\n                                </li>\n                            </ul>\n                        </div>\n\n                        <div class="">\n\n                            <div class="pickup__delivery-text-wrapper container g-bb-fat">\n                                <span>\n                                    <span class="pickup-point__info-delivery-link">{{ carrier.name }}</span>  \n                                    {{ carrier.price > 0 ? \' - \' + carrier.format_price : \'\'}}\n                                    <br/>\n                                    <span class="pickup-point__date-delivery-label" v-html="carrier.delivery_text"></span>\n                                    <br/>\n                                    <a class="pickup__padding-top pickup-point__change-link g-mt0" href="/delivery-payment">Условия доставки</a>\n                                </span>\n                            </div>\n\n                        \n                            \n                            <p class="container-title">Контакты</p>\n                           \n                            <div class="pickup-delivery g-bb-fat">\n                                <div>\n                                        <div class="input" :class="{ \'_has-value\': user.phone, \'_focused\': focus.phone == 1, \'_invalid\': focus.phone == 2 && !user.phone }">\n                                            <label class="input__label">Телефон *</label>\n                                            <the-mask \n                                                @focus="focus.phone = 1" \n                                                @blur="focus.phone = 2"\n                                                placeholder="+7(777)777-77-77 *"\n                                                mask="+7(###)###-##-##"\n                                                class="input__input" \n                                                v-model="user.phone" >\n                                        </div>\n                                        <div class="input__has-error" v-if="focus.phone == 2">Пожалуйста, заполните это поле</div>\n                                </div>\n                                <div>\n                                    <div class="input" :class="{ \'_has-value\': user.email, \'_focused\': focus.email == 1, \'_invalid\': focus.email == 2 && !user.email }">\n                                        <label class="input__label">Email *</label>\n                                        <input \n                                            class="input__input" \n                                            v-model="user.email" \n                                            @focus="focus.email = 1" \n                                            @blur="focus.email = 2"/>\n                                    </div>\n                                    <div class="input__has-error" v-if="focus.email == 2">Пожалуйста, заполните это поле</div>\n                                </div>\n                                <div>\n                                    <div class="input" :class="{ \'_has-value\': user.name, \'_focused\': focus.name == 1, \'_invalid\': focus.name == 2 && !user.name }">\n                                        <label class="input__label">Имя *</label>\n                                        <input \n                                            class="input__input" \n                                            v-model="user.name" \n                                            @focus="focus.name = 1" \n                                            @blur="focus.name = 2"/>\n                                    </div>\n                                    <div class="input__has-error" v-if="focus.name == 2">Пожалуйста, заполните это поле</div>\n                                </div>\n                            </div>\n                            \n                            \n                            <span v-if="carrier.id == 1">\n                                <p class="container-title">Укажите адрес доставки</p>\n                                \n                                <div class="pickup-delivery g-bb-fat">\n                                    <div>\n                                        <div class="input" :class="{ \'_has-value\': address, \'_focused\': focus.address == 1, \'_invalid\': focus.address == 2 && !address }">\n                                            <label class="input__label">Адрес *</label>\n                                            <input \n                                                class="input__input" \n                                                v-model="address" \n                                                @focus="focus.address = 1" \n                                                @blur="focus.address = 2"/>\n                                        </div>\n                                        <div class="input__has-error" v-if="focus.address == 2">Пожалуйста, заполните это поле</div>\n                                    </div>\n                                    <div>\n                                        <div class="input" :class="{ \'_has-value\': city, \'_focused\': focus.city == 1, \'_invalid\': focus.city == 2 && !city }">\n                                            <label class="input__label">Город *</label>\n                                            <input \n                                                class="input__input" \n                                                v-model="city" \n                                                @focus="focus.city = 1" \n                                                @blur="focus.city = 2"/>\n                                        </div>\n                                        <div class="input__has-error" v-if="focus.city == 2">Пожалуйста, заполните это поле</div>\n                                    </div>\n                                </div>    \n                            </span>\n                            \n                            <p class="container-title">Оплата</p>\n                            <div class="container pickup-step g-bb-fat">\n                                <ul class="nav-pills g-bg-c0 g-bb0">\n                                    <li \n                                        @click="selectedPayment(item)" \n                                        v-for="item in list_payments" \n                                        class="nav-pills__button g-ttu"\n                                        v-bind:class="{\'_active\': item.id == payment.id}">\n                                             {{ item.name }}\n                                             \x3c!--<img width="20" v-bind:src="item.logo">--\x3e\n                                    </li>\n                                </ul>\n                            </div>\n                            \n                           \n                            <p class="container-title">Комментарий к заказу</p> \n                            <div class="pickup-delivery g-bb-fat">\n                                <div>\n                                        <div class="input" :class="{ \'_has-value\': comment, \'_focused\': focus.comment == 1 }">\n                                            <label class="input__label">Комментарий к заказу</label>\n                                             <textarea\n                                                   v-model="comment" \n                                                   name="comment"\n                                                   @focus="focus.comment = 1" \n                                                   @blur="focus.comment = 2"\n                                                   class="input__input"></textarea>\n                                        </div>\n                                        <div class="input__has-error" v-if="focus.comment == 2">Пожалуйста, заполните это поле</div>\n                                </div>\n                            </div>    \n                           \n                           \n                           <p class="container-title">Состав заказа</p> \n                           \n                           \n                          <div v-for="(item, index) in list_cart">\n                              <div class="header-cart__content">\n                                    <a v-bind:href="item.product_url"class="header-cart__image-wrapper">\n                                        <img \n                                            height="105" \n                                            width="140" \n                                            v-bind:src="item.product_photo"\n                                            v-bind:alt="item.product_name"\n                                            v-bind:title="item.product_name"\n                                            class="header-cart__image">\n                                    </a>\n                                    <div class="header-cart__info">\n                                        <h3 class="header-cart__name">\n                                            <a  v-bind:href="item.product_url" class="header-cart__name-link">\n                                                 {{ item.product_name }}\n                                            </a>\n                                        </h3>\n                                        <div class="header-cart__more-info" v-if="false">Гипермаркет шин ecar-kz</div>\n                                        <div class="header-cart__prices">\n                                            <div class="header-cart__debet">\n                                                <span class="header-cart__price">{{ item.product_specific_price }}</span>\n                                                <br/>\n                                                <span class="header-cart__price">{{ item.quantity }} шт. x {{ item.sum }}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                              </div>\n                              <div class="container product-quantity g-bt-thin">\n                                    <div class="product-quantity__counter">\n                                            <button @click="decreaseProductQuantity(item, index)" class="product-quantity__counter-button _minus" :class="{\'_disabled\' : item.quantity == 1}"></button>\n                                            <div class="product-quantity__counter-number">\n                                                {{ item.quantity }}\n                                            </div>\n                                            <button  @click="increaseProductQuantity(item, index)" class="product-quantity__counter-button _plus"></button>\n                                            <div class="product-quantity__text">шт</div>\n                                    </div>\n                              </div>\n                              <div class="container text-center">\n                                 <a class="button" @click="deleteProductQuantity(item.product_id)">Удалить</a>\n                              </div>   \n                          </div> \n                          \n                          <div class="header-cart__content">\n                                <div class="header-cart__info">\n                                    <p class="header-cart__total-info"><b>Доставка:</b> {{ carrier.format_price }}</p>\n                                    <p class="header-cart__total-info"><b>Количество:</b> {{ cart_total.quantity }}</p>\n                                    <p class="header-cart__total-info"><b>Итого:</b> {{ cart_total.sum }}</p>\n                                </div>\n                          </div>\n\n                          <div class="header-cart__content">\n                              <button class="button _big _space" @click="checkout">\n                                    <span class="ajax-loader">\n                                        <img v-show="checkout_wait" src="/site/images/ajax-loader.gif"/>\n                                        Оформить заказ\n                                    </span>\n                              </button>\n                          </div>    \n                    \n                        </div>\n                    </div>\n                </div>',data:()=>({list_cart:[],list_carriers:[],list_payments:[],cart_total:{sum:0,quantity:0},order_id:0,carrier:{},payment:{},city:"",address:"",user:{name:user_info.name,email:user_info.email,phone:user_info.phone},comment:"",checkout_wait:!1,focus:{phone:1,email:0,name:0,address:0,city:0,comment:0}}),updated(){},methods:{selectedCarrier(e){this.carrier=e},selectedPayment(e){this.payment=e},listCart(){axios.post("/list-cart").then(e=>{this.list_cart=e.data})},decreaseProductQuantity(e,i){this.list_cart[i].quantity>1&&this.cartSave(e.product_id,this.list_cart[i].quantity-1)},increaseProductQuantity(e,i){this.cartSave(e.product_id,this.list_cart[i].quantity+1)},deleteProductQuantity(e){axios.post("/cart-delete/"+e).then(e=>{e.data&&(this.listCart(),this.cartTotal())})},cartTotal(){axios.get("/cart-total/"+(this.carrier.id?this.carrier.id:0)).then(e=>{this.cart_total.sum=e.data.sum,this.cart_total.quantity=e.data.quantity})},cartSave(e,i){axios.post("/cart-save",{product_id:e,quantity:i}).then(e=>{e.data&&(this.listCart(),this.cartTotal())})},async checkout(){if(!this.checkout_wait){this.checkout_wait=!0;var e={carrier_id:this.carrier.id,payment_id:this.payment.id,city:this.city,address:this.address,user:{phone:this.user.phone,email:this.user.email,name:this.user.name},comment:this.comment},i=this;await axios.post("/checkout",e).then(e=>{var n=e.data;n&&(i.order_id=n.order_id,i.order_id&&(i.list_cart=[],Swal({type:"success",html:'Номер заказа <a style="font-size: 20px;" href="/order-history/'+i.order_id+'">№:'+i.order_id+"</a>",title:"Ваш заказ успешно оформлен"})))}).catch(function(e){swalErrors(e.response.data.errors,"Ошибка 422")}),this.checkout_wait=!1}}},watch:{carrier:{handler:function(e,i){this.cartTotal()},deep:!0}},created(){this.listCart(),this.cartTotal(),axios.post("/list-carriers").then(e=>{e.data&&(this.list_carriers=e.data,this.carrier=this.list_carriers[0])}),axios.post("/list-payments").then(e=>{e.data&&(this.list_payments=e.data),this.payment=this.list_payments[0]})},updated(){}});const app=new Vue({el:"#app",data:{componentDialog:"",open_sort_catalog:!1,showFilters:!1,product_id:0},methods:{catalogSort(e){console.log(e),$(".sort_select option[value="+e+"]").prop("selected",!0).attr("selected","true"),$(".sort_select").change()}}});