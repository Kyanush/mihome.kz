function addToCartSite(t,e,a){validSelectModelProduct()&&addToCart(e,a)&&(header.listCart(),header.cartTotal(),Swal.fire({title:"Товар в корзине",type:"success",showCancelButton:!0,confirmButtonColor:"#4aa90b",cancelButtonColor:"#0089d0",confirmButtonText:"Оформление заказа",cancelButtonText:"Продолжить покупки"}).then(t=>{t.value&&(location.href="/checkout")}))}if($("#quickView").length>0)var quickView=new Vue({el:"#quickView",data:{product:[],detailUrlProduct:"",pathPhoto:"",price:0,attributes:[]},methods:{getProduct(t){var e=this;getProduct(t,function(t){e.product=t.product,e.detailUrlProduct=t.detailUrlProduct,e.pathPhoto=t.pathPhoto,e.price=t.price,e.attributes=t.attributes,modalShow("#quickView")})}}});if($("#header").length>0)var header=new Vue({el:"#header",data:()=>({cart_total:{sum:0,quantity:0},list_cart:null,pfcc:0,pfwc:0,show_block:{display:"block"}}),methods:{listCart(){axios.post("/list-cart").then(t=>{this.list_cart=t.data})},deleteProductQuantity(t){axios.post("/cart-delete/"+t).then(t=>{t.data&&(this.listCart(),this.cartTotal(),checkout.listCart(),checkout.cartTotal())})},getProductFeaturesCompareCount(){axios.get("/product-features-compare-count").then(t=>{this.pfcc=t.data})},getProductFeaturesWishlistCount(){axios.get("/product-features-wishlist-count").then(t=>{this.pfwc=t.data})},cartTotal(){axios.get("/cart-total/0").then(t=>{this.cart_total.sum=t.data.sum,this.cart_total.quantity=t.data.quantity})}},created(){this.listCart(),this.cartTotal(),this.getProductFeaturesCompareCount(),this.getProductFeaturesWishlistCount()}});function modalShow(t){$(t).modal("show")}function modalHide(t){$(t).modal("hide")}var callbackWait=!1;function callback(t){callbackWait||(callbackWait=!0,ajaxLoader(t,!0),$.ajax({type:"POST",url:"/callback",data:getFormData(t),success:function(e){e&&(modalHide(".callback"),Swal({title:"Обратный звонок",html:"Заявка отправлена! В ближайшее время с Вами свяжется наш менеджер."}),clearFormData(t)),callbackWait=!1,ajaxLoader(t,!1)},error:function(e,a,r){422==e.status&&swalErrors(e.responseJSON.errors,"Ошибка 422"),callbackWait=!1,ajaxLoader(t,!1)}}))}function writeReviewShow(){$("#product-tab li:nth-child(3) a").trigger("click"),$("html, body").animate({scrollTop:$("#reviews").offset().top-150},1e3)}function writeReview(t){ajaxLoader(t,!0),$.ajax({type:"POST",url:"/write-review",data:getFormData(t),success:function(e){e?(Swal({title:"Написать отзыв",html:"Ваш отзыв успешно оставлен"}),clearFormData(t),setInterval(function(){location.reload()}.bind(this),1e3)):alert("Ошибка БД"),ajaxLoader(t,!1)},error:function(e,a,r){422==e.status&&swalErrors(e.responseJSON.errors,"Ошибка 422"),ajaxLoader(t,!1)}})}function writeQuestion(t){ajaxLoader(t,!0),$.ajax({type:"POST",url:"/write-question",data:getFormData(t),success:function(e){e?(Swal({title:"Задать вопрос",html:"Ваш вопрос успешно задан"}),clearFormData(t)):alert("Ошибка БД"),ajaxLoader(t,!1)},error:function(e,a,r){422==e.status&&swalErrors(e.responseJSON.errors,"Ошибка 422"),ajaxLoader(t,!1)}})}$(document).ready(function(){$("#buy-in-one-click").on("click",function(t){validSelectModelProduct()&&modalShow("#popup-buy-in-one-click")}),$(".product-search").length>0&&($(".product-search").autocomplete({source:function(t,e){$.ajax({url:"/product-search",data:{searchText:t.term,maxResults:10},dataType:"json",success:function(t){e($.map(t,function(t){return{name:t.name,photo:t.photo,url:t.url,price:t.price}}))}})}}).data("ui-autocomplete")._renderItem=function(t,e){var a='<a class="list_item_container" href="'+e.url+'"><div class="image"><img src="'+e.photo+'"/></div><div class="name">'+e.name+" - <b>"+e.price+"</b></div>";return $("<li></li>").data("ui-autocomplete-item",e).append(a).appendTo(t)}),$(".review_plus").on("click",function(){var t=$(this).attr("review_id"),e=$(this);productReviewSetLike(t,1,function(a){a&&($("#review_"+t).find(".review_plus").find(".review_number").html(a.likes_count),$("#review_"+t).find(".review_minus").find(".review_number").html(a.dis_likes_count),e.addClass("active"),e.parent().find(".review_minus").removeClass("active"))})}),$(".review_minus").on("click",function(){var t=$(this).attr("review_id"),e=$(this);productReviewSetLike(t,0,function(a){a&&($("#review_"+t).find(".review_plus").find(".review_number").html(a.likes_count),$("#review_"+t).find(".review_minus").find(".review_number").html(a.dis_likes_count),e.addClass("active"),e.parent().find(".review_plus").removeClass("active"))})})});var ocoWait=!1;function oneClickOrder(t){ocoWait||(ocoWait=!0,ajaxLoader(t,!0),$.ajax({type:"POST",url:"/one-click-order",data:getFormData(t),success:function(e){e?(this.order_id=e.order_id,this.order_id&&Swal({type:"success",html:'Номер заказа <a style="font-size: 20px;" href="/order-history/'+this.order_id+'">№:'+this.order_id+"</a>",title:"Ваш заказ успешно оформлен"})):alert("Ошибка БД"),modalHide(".one-click-order"),ocoWait=!1,ajaxLoader(t,!1)},error:function(e,a,r){422==e.status&&swalErrors(e.responseJSON.errors,"Ошибка 422"),ocoWait=!1,ajaxLoader(t,!1)}}))}